--- src/Form/SettingsProfileForm.php
+++ src/Form/SettingsProfileForm.php
@@ -2,7 +2,7 @@
 
 namespace Drupal\backup_migrate\Form;
 
-use BackupMigrate\Drupal\Config\DrupalConfigHelper;
+use Drupal\backup_migrate\Drupal\Config\DrupalConfigHelper;
 use Drupal\Core\Entity\EntityForm;
 use Drupal\Core\Form\FormStateInterface;
 
@@ -37,7 +37,13 @@ public function form(array $form, FormStateInterface $form_state) {
       '#disabled' => !$backup_migrate_settings->isNew(),
     ];
 
-    $bam = backup_migrate_get_service_object($backup_migrate_settings->get('config'));
+    // Make sure the config is a valid empty array.
+    // @todo Is this a bug in the API?
+    $config = $backup_migrate_settings->get('config');
+    if (empty($config)) {
+      $config = [];
+    }
+    $bam = backup_migrate_get_service_object($config);
 
     $form['config'] = DrupalConfigHelper::buildAllPluginsForm($bam->plugins(), 'backup', ['config']);
 
@@ -54,13 +60,13 @@ public function save(array $form, FormStateInterface $form_state) {
 
     switch ($status) {
       case SAVED_NEW:
-        drupal_set_message($this->t('Created the %label Settings Profile.', [
+        \Drupal::messenger()->addMessage($this->t('Created the %label Settings Profile.', [
           '%label' => $backup_migrate_settings->label(),
         ]));
         break;
 
       default:
-        drupal_set_message($this->t('Saved the %label Settings Profile.', [
+        \Drupal::messenger()->addMessage($this->t('Saved the %label Settings Profile.', [
           '%label' => $backup_migrate_settings->label(),
         ]));
     }
