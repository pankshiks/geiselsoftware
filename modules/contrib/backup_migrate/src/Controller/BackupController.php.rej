--- src/Controller/BackupController.php
+++ src/Controller/BackupController.php
@@ -2,12 +2,12 @@
 
 namespace Drupal\backup_migrate\Controller;
 
-use BackupMigrate\Core\Destination\DestinationInterface;
-use BackupMigrate\Core\Destination\ListableDestinationInterface;
-use BackupMigrate\Drupal\Destination\DrupalBrowserDownloadDestination;
+use Drupal\backup_migrate\Core\Destination\ListableDestinationInterface;
+use Drupal\backup_migrate\Drupal\Destination\DrupalBrowserDownloadDestination;
 use Drupal\backup_migrate\Entity\Destination;
 use Drupal\Core\Controller\ControllerBase;
 use Drupal\Core\Url;
+use Drupal\Core\Utility\TableSort;
 
 /**
  * Class BackupController.
@@ -17,9 +17,9 @@
 class BackupController extends ControllerBase {
 
   /**
-   * @var DestinationInterface
+   * @var \Drupal\backup_migrate\Core\Destination\DestinationInterface
    */
-  var $destination;
+  public $destination;
 
   /**
    *
@@ -79,7 +79,7 @@ public function listDestinationEntityBackups(Destination $backup_migrate_destina
   /**
    * List the backups in the given destination.
    *
-   * @param \BackupMigrate\Core\Destination\ListableDestinationInterface $destination
+   * @param \Drupal\backup_migrate\Core\Destination\ListableDestinationInterface $destination
    *
    * @return mixed
    */
@@ -95,28 +95,28 @@ public function listDestinationBackups(
       [
         'data' => $this->t('Name'),
         'class' => [RESPONSIVE_PRIORITY_MEDIUM],
-        'field' => 'name'
+        'field' => 'name',
       ],
       [
         'data' => $this->t('Date'),
         'class' => [RESPONSIVE_PRIORITY_MEDIUM],
         'field' => 'datestamp',
-      'sort' => 'desc'
+        'sort' => 'desc',
       ],
       [
         'data' => $this->t('Size'),
         'class' => [RESPONSIVE_PRIORITY_MEDIUM],
         'field' => 'filesize',
-      'sort' => 'desc'
+        'sort' => 'desc',
       ],
       [
         'data' => $this->t('Operations'),
-        'class' => [RESPONSIVE_PRIORITY_LOW]
+        'class' => [RESPONSIVE_PRIORITY_LOW],
       ],
     ];
 
-    $order = tablesort_get_order($header);
-    $sort = tablesort_get_sort($header);
+    $order = TableSort::getOrder($header, \Drupal::request());
+    $sort = TableSort::getSort($header, \Drupal::request());
     $php_sort = $sort == 'desc' ? SORT_DESC : SORT_ASC;
 
     $backups = $destination->queryFiles([], $order['sql'], $php_sort, $count);
@@ -187,10 +187,7 @@ public function listDestinationBackups(
    *
    * @param $backup_id
    */
-  public function download(
-    Destination $backup_migrate_destination,
-    $backup_id
-  ) {
+  public function download(Destination $backup_migrate_destination, $backup_id) {
     $destination = $backup_migrate_destination->getObject();
     $file = $destination->getFile($backup_id);
     $file = $destination->loadFileForReading($file);
